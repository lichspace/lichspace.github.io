<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ua-trace</title>
    <script src="https://cdn.jsdelivr.net/npm/promise-polyfill@8/dist/polyfill.js"></script>
    <style>
        h1{text-align: center;}
        .box{background: #3fb9f9;padding: 10px;margin: 20px auto;width: 400px;border-radius: 3px;box-shadow: 0 0 5px rgba(0,0,0,.2);color: #fff;
        }

        .box img{width: 40px;margin-left: 10px;}

        .bottom{margin-top: 1000px}
        .info{position: fixed;left:0;top:0;padding: 10px;}
    </style>
</head>
<body>
<h1>ua-trace demo</h1>
<pre class="info"></pre>
<div class="box">
    <ul>
        <li data-ua-trace='{"link":"www.url.1",index:"1"}'>list 1</li>
        <li data-ua-trace='{"link":"www.url.2",index:"2"}'>list 2</li>
        <li data-ua-trace='{"link":"www.url.4","width":100,index:"3"}'>list 3</li>
        <li data-ua-trace='{"link":"url xxx","myname":"哈哈哈",index:"4"}'>list 4</li>
    </ul>
    <img src="chrome.png" data-ua-trace='{"browser":"chrome"}' alt="chrome">
    <img src="firefox.png" data-ua-trace='{"browser":"firefox"}' alt="firefox">
    <img src="IE.png" data-ua-trace='{"browser":"IE"}' alt="IE">
    <img src="ieage.png" data-ua-trace='{"browser":"ieage"}' alt="ieage">
    <img src="opera.png" data-ua-trace='{"browser":"opera"}' alt="opera">
    <img src="saferi.png" data-ua-trace='{"browser":"safari"}' alt="safari">
</div>

<div class="bottom box">
    <p data-ua-trace='{"position":"bottom"}'>this is a ua-trace explore test</p>
</div>

<script src="https://unpkg.com/ua-trace@1.0.9/dist/ua-trace.js"></script>
<script>
    var height = screen.height
    document.querySelector('.bottom').style.marginTop = height+'px'
    var mytrace = new UATrace({url:'xxx'},{
        id:9521,
        name:'ua-trace'
    })

    mytrace.subscribe(function (data,type) {
        console.log(data,type)
        showObject(data,type)
        //return data  //will report as GET
        return false
    })


    function  showObject(data,type) {
        var html = '{\n'
        for(var key in data){
            html+='  '+key+':'+data[key]+'\n'
        }
        html+='}\n'
        html+='type:'+type
        document.querySelector('.info').innerHTML = html
    }

</script>
</body>
</html>